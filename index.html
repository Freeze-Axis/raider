<!DOCTYPE html>
<html lang="ja">
<head>
<!----------------------------------------------------------------->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#a9ceec" />

  <title>Freeze荒らしツール</title>
  <meta name="description" content="" />

  <link rel="icon" href="https://i.ibb.co/LyFxxY5/freeze.png" />

  <!-- Open Graph -->
  <meta property="og:type"        content="website" />
  <meta property="og:site_name"   content="Freeze" />
  <meta property="og:title"       content="荒らしツール" />
  <meta property="og:description" content="★シンプルで高品質★" />
  <meta property="og:url"         content="" />
  <meta property="og:image"       content="" />
<!----------------------------------------------------------------->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    /* スクロールバーのスタイル */
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: #202225; border-radius: 3px; }
    ::-webkit-scrollbar-thumb { background: #5865f2; border-radius: 3px; }
    ::-webkit-scrollbar-thumb:hover { background: #7289da; }

    *, *::before, *::after { box-sizing: border-box; }
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg,#2f3136,#1e1f22);
      color:#fff;
      margin:0; padding:0;
      display:flex; justify-content:center; align-items:center;
      height:100vh;
    }
    .card {
      background:#36393f;
      padding:32px;
      border-radius:20px;
      box-shadow:0 15px 35px rgba(0,0,0,.5);
      width:100%; max-width:600px;
      animation:fadeIn .8s ease;
      overflow:auto; max-height:95vh;
    }
    @keyframes fadeIn {
      from { opacity:0; transform:translateY(20px); }
      to   { opacity:1; transform:translateY(0); }
    }
    h2 { color:#adb8ff; text-align:center; margin:0 0 24px; font-weight:600; }
    label { display:block; margin-top:18px; font-size:14px; }

    /* テキスト入力 */
    input[type="text"], textarea {
      width:100%; padding:10px; margin-top:6px;
      border-radius:8px; border:none;
      background:#202225; color:#fff;
      font-family:monospace; resize:vertical;
    }
    textarea { overflow-y:auto; }
    input[type="number"] {
      padding:6px; margin-top:6px;
      border-radius:8px; border:none;
      background:#202225; color:#fff;
      font-family:monospace; appearance:none;
      width:80px;
    }
    input[type=number]::-webkit-inner-spin-button,
    input[type=number]::-webkit-outer-spin-button {
      -webkit-appearance:none; margin:0;
    }

    /* フレックス行 */
    .row {
      display:flex; gap:12px; align-items:center;
    }
    .row > * { flex:none; }
    .row label,
    .row .checkbox-container { margin-top:0; }

    /* トグルスイッチ */
    .checkbox-container {
      display:flex; align-items:center; gap:8px;
      cursor:pointer; font-size:14px; user-select:none;
      margin-top:6px;
    }
    .checkbox-container input {
      appearance:none; width:36px; height:18px;
      background:#4f545c; border-radius:18px;
      position:relative; transition:background .3s ease;
    }
    .checkbox-container:hover input { background:#5a5f68; }
    .checkbox-container input:focus {
      outline:none; box-shadow:0 0 0 3px rgba(114,137,218,0.5);
    }
    .checkbox-container input::before {
      content:''; position:absolute;
      width:14px; height:14px; border-radius:50%;
      background:#fff; top:2px; left:2px;
      transition:transform .3s cubic-bezier(.68,-.55,.27,1.55);
    }
    .checkbox-container input:checked { background:#7289da; }
    .checkbox-container input:checked::before {
      transform:translateX(18px);
    }
    .checkbox-container span { transition:color .3s; }
    .checkbox-container input:checked + span {
      color:#adb8ff;
    }

    /* ボタン */
    button.primary {
      margin-top:24px; width:100%; padding:14px;
      border:none; border-radius:14px;
      background:linear-gradient(135deg,#6d75ff,#5865f2);
      color:#fff; font-weight:700; font-size:18px;
      letter-spacing:.5px; cursor:pointer; position:relative;
      box-shadow:
        0 4px 15px rgba(88,101,242,.4),
        0 0 10px rgba(255,255,255,.1),
        inset 0 0 5px rgba(255,255,255,.2);
      overflow:hidden; transition:all .3s;
    }
    button.primary:hover {
      background:linear-gradient(135deg,#7d89ff,#4e57e0);
      box-shadow:
        0 6px 22px rgba(88,101,242,.6),
        0 0 24px rgba(255,255,255,.2),
        inset 0 0 10px rgba(255,255,255,.3);
      transform:scale(1.03);
    }
    button.primary:active {
      transform:scale(0.96);
      box-shadow:inset 0 4px 6px rgba(0,0,0,.3);
    }
    button.primary.loading {
      color: #ffffffa2; pointer-events:none;
    }

    button.secondary {
      margin-top:8px; padding:6px 12px;
      background:#5865f2; color:#fff;
      font-size:14px; border:none; border-radius:6px;
      position:relative; overflow:hidden;
    }
    button.secondary::after {
      content:''; position:absolute;
      top:0; left:0; width:100%; height:100%;
      background:rgba(255,255,255,0.1);
      opacity:0; transition:opacity .3s;
    }
    button.secondary:hover::after { opacity:1; }
    button.secondary:active::after { background:rgba(255,255,255,0.2); }

    /* 停止・退出ボタン強調 */
    #stopSpam, #leaveBtn {
      width:48%; padding:10px;
      border:none; border-radius:10px;
      background:linear-gradient(135deg,#e74c3c,#c0392b);
      color:#fff; font-weight:700; font-size:14px;
      letter-spacing:.5px; cursor:pointer; transition:all .3s;
      margin-top:12px;
      box-shadow: 0 4px 10px rgba(255,0,0,0.3);
    }
    #stopSpam:hover, #leaveBtn:hover {
      background:linear-gradient(135deg,#c0392b,#e74c3c);
      transform:scale(1.03);
    }
    #stopSpam:active, #leaveBtn:active {
      transform:scale(0.96);
      box-shadow:inset 0 4px 6px rgba(0,0,0,.3);
    }

    .button-container {
      display: flex;
      gap: 10px;
      justify-content: center;
    }

    /* Advanced options (details) */
    details { margin-top:18px; }
    summary { list-style:none; padding-left:20px; cursor:pointer; font-weight:600; position:relative; margin-top:0; }
    summary::-webkit-details-marker { display:none; }
    summary::marker { content:none; }
    summary::before { content:'▶'; position:absolute; left:0; top:50%; transform:translateY(-50%); transition:transform .3s ease; }
    details[open] > summary::before { transform:translateY(-50%) rotate(90deg); }
    .detail-content { transform-origin:top center; transform:scaleY(0); opacity:0; transition:transform .3s ease, opacity .3s ease; }
    details[open] .detail-content { transform:scaleY(1); opacity:1; }

    #log { margin-top:20px; padding:10px; height:120px; overflow-y:auto; background:#202225; border-radius:10px; font-family:monospace; font-size:12px; white-space:pre-wrap; resize: vertical;}
    @media (max-width: 600px) {
      .card {
        padding: 16px;
        max-width: 100%;
        max-height: 100vh;
        border-radius: 10px;
      }

      h2 {
        font-size: 18px;
        margin-bottom: 16px;
      }

      label {
        font-size: 13px;
        margin-top: 12px;
      }

      input[type="text"],
      textarea,
      input[type="number"] {
        padding: 8px;
        font-size: 12px;
      }

      button.primary {
        padding: 12px;
        font-size: 16px;
      }

      button.secondary {
        padding: 8px 12px;
        font-size: 13px;
      }

      .row {
        flex-direction: column;
        align-items: stretch;
      }

      .row label {
        width: 100%;
      }

      .button-container {
        flex-direction: column;
        gap: 8px;
      }

      #stopSpam,
      #leaveBtn {
        width: 100%;
      }

      details summary {
        font-size: 13px;
        padding-left: 18px;
      }

      .checkbox-container {
        font-size: 13px;
      }

      #log {
        height: 80px;
        font-size: 11px;
      }
    }
    .radio-container {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    user-select: none;
    font-size: 14px;
    margin-right: 16px;
  }

  .radio-container input[type="radio"] {
    appearance: none;
    width: 20px;
    height: 20px;
    background: #4f545c;
    border: 2px solid #5865f2;
    border-radius: 50%;
    position: relative;
    transition: background .3s ease, border-color .3s ease;
  }

  .radio-container input[type="radio"]::before {
    content: "";
    position: absolute;
    top: 50%; left: 50%;
    width: 10px; height: 10px;
    background: #fff;
    border-radius: 50%;
    transform: translate(-50%, -50%) scale(0);
    transition: transform .2s ease-out;
  }

  .radio-container input[type="radio"]:checked {
    background: #5865f2;
    border-color: #7289da;
  }

  .radio-container input[type="radio"]:checked::before {
    transform: translate(-50%, -50%) scale(1);
  }

  .radio-container span {
    color: #fff;
    transition: color .3s;
  }
  .radio-container input[type="radio"]:checked + span {
    color: #adb8ff;
  }

  </style>
</head>
<body>
  <div class="card">
    <h2>Freeze Web Spammer</h2>
    <form id="form">
      <label>トークン
        <textarea id="tokens" rows="4" placeholder="カンマ / 改行 / スペースで区切る MTM1ODc4MTE3NTIzMzI1MzU*****,MTEwMDU5Njc1NjQ1NjE2MTMwM*****,..."></textarea>
      </label>

      <label>サーバーID
        <input type="text" id="guildId" required placeholder="123456789012345678">
      </label>

      <label>チャンネルID
        <textarea id="channelIds" rows="2" placeholder="カンマ / 改行 / スペースで区切る 123456789012345678,123456789012345678,..."></textarea>
      </label>
      <button type="button" id="autoFillChannels" class="secondary">チャンネル自動取得</button>


    <label>メッセージ内容</label>
    <div class="row">
      <label class="radio-container">
        <input type="radio" name="messageOption" value="A" required checked>
        <span>通常宣伝文</span>
      </label>
      <label class="radio-container">
        <input type="radio" name="messageOption" value="B">
        <span>クラッシュGIF宣伝文</span>
      </label>
    </div>
      <label class="checkbox-container">
        <input type="checkbox" id="allmention" checked>
        <span>全体メンション</span>
      </label>
      <label class="checkbox-container">
        <input type="checkbox" id="randomize">
        <span>メッセージのランダマイズ</span>
      </label>
      <div class="row">
        <label>メッセージ送信間隔
          <input type="number" id="delay" min="0" step="0.1" placeholder="0"> 秒
        </label>
        <label>メッセージ送信上限
          <input type="number" id="limit" min="1" step="1" placeholder="0"> 回
        </label>
      </div>

      <details>
        <summary>メンション設定</summary>
        <div class="detail-content">
          <label>メンションするユーザーID一覧
            <textarea id="mentionIds" rows="2" placeholder="カンマ / 改行 / スペースで区切る 123456789012345678,123456789012345678"></textarea>
          </label>
          <button type="button" id="fetchMentions" class="secondary">メンション自動取得</button>
        </div>
      </details>

      <details>
        <summary>投票設定</summary>
        <div class="detail-content">
          <label>投票 タイトル
            <input type="text" id="pollTitle" placeholder="投票タイトル">
          </label>
          <label>投票 選択肢
            <textarea id="pollAnswers" rows="2" placeholder="カンマ / 改行 / スペースで区切る 選択肢1,選択肢2,..."></textarea>
          </label>
        </div>
      </details>

      <button id="submitBtn" type="submit" class="primary" disabled>実行</button>
    </form>
    
    <div class="button-container">
      <button id="stopSpam" class="secondary">スパム停止</button>
      <button id="leaveBtn" class="secondary">サーバー退出</button>
    </div>

    <div id="log"></div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script>
    // ========== フォーム履歴保存・復元 ==========
    const form = document.getElementById('form');
    const formKeys = [
      'tokens','guildId','channelIds','messageOption','allmention','randomize','delay','limit','mentionIds','pollTitle','pollAnswers'
    ];
    const FORM_STORAGE_KEY = 'freeze_spammer_form';
    function saveFormHistory() {
      const data = {};
      for (const key of formKeys) {
        const el = form.elements[key];
        if (!el) continue;
        if (el.type === 'checkbox') data[key] = el.checked;
        else if (el.type === 'radio') {
          const checked = form.querySelector(`input[name="${key}"]:checked`);
          data[key] = checked ? checked.value : '';
        } else data[key] = el.value;
      }
      localStorage.setItem(FORM_STORAGE_KEY, JSON.stringify(data));
    }
    function loadFormHistory() {
      const data = JSON.parse(localStorage.getItem(FORM_STORAGE_KEY)||'{}');
      for (const key of formKeys) {
        const el = form.elements[key];
        if (!el || data[key] === undefined) continue;
        if (el.type === 'checkbox') el.checked = !!data[key];
        else if (el.type === 'radio') {
          const radio = form.querySelector(`input[name="${key}"][value="${data[key]}"]`);
          if (radio) radio.checked = true;
        } else el.value = data[key];
      }
    }
    form.addEventListener('input', saveFormHistory);
    window.addEventListener('DOMContentLoaded', loadFormHistory);
    // ========== ユーティリティ ==========
    function parseIds(str) {
      // カンマ・改行・スペース区切りで分割
      return str.split(/[\s,]+/).map(s => s.trim()).filter(Boolean);
    }
    function log(msg, isError = false) {
      const logDiv = document.getElementById('log');
      const el = document.createElement('div');
      el.textContent = msg;
      el.style.color = isError ? '#ff6b6b' : '#e0e0e0';
      logDiv.appendChild(el);
      logDiv.scrollTop = logDiv.scrollHeight;
    }
    function setBtnState(running) {
      document.getElementById('submitBtn').disabled = running;
      document.getElementById('stopSpam').disabled = !running;
    }
    function enableSubmitIfReady() {
      // 必須項目が埋まっていれば実行ボタン有効化
      const tokens = parseIds(document.getElementById('tokens').value);
      const guildId = document.getElementById('guildId').value.trim();
      const channelIds = parseIds(document.getElementById('channelIds').value);
      document.getElementById('submitBtn').disabled = !(tokens.length && guildId && channelIds.length);
    }

    // ========== チャンネル自動取得 ==========
    document.getElementById('autoFillChannels').addEventListener('click', async function() {
      const tokens = parseIds(document.getElementById('tokens').value);
      const guildId = document.getElementById('guildId').value.trim();
      if (!tokens.length || !guildId) {
        log('トークンとサーバーIDを入力してください', true); return;
      }
      for (const token of tokens) {
        try {
          const res = await axios.get(`https://discord.com/api/v9/guilds/${guildId}/channels`, {
            headers: { Authorization: token }
          });
          const ids = res.data.filter(ch => [0,2,5].includes(ch.type)).map(ch => ch.id);
          if (ids.length) {
            document.getElementById('channelIds').value = ids.join(',');
            log('チャンネルID自動取得成功');
            enableSubmitIfReady();
            return;
          }
        } catch (e) {
          // 次のトークンで試す
        }
      }
      log('チャンネルID自動取得に失敗', true);
    });

    // ========== メンション自動取得 ==========
    document.getElementById('fetchMentions').addEventListener('click', async function() {
      const tokens = parseIds(document.getElementById('tokens').value);
      const channelIds = parseIds(document.getElementById('channelIds').value);
      if (!tokens.length || !channelIds.length) {
        log('トークンとチャンネルIDを入力してください', true); return;
      }
      const userSet = new Set();
      for (const channelId of channelIds) {
        try {
          const res = await axios.get(`https://discord.com/api/v10/channels/${channelId}/messages?limit=100`, {
            headers: { Authorization: tokens[0] }
          });
          res.data.forEach(msg => { if (msg.author && msg.author.id) userSet.add(msg.author.id); });
        } catch (e) {}
      }
      document.getElementById('mentionIds').value = Array.from(userSet).join(',');
      log(`メンションID自動取得: ${userSet.size}件`);
      enableSubmitIfReady();
    });

    // ========== スパム送信処理 ==========
    let spamRunning = false;
    let spamAbort = false;
    document.getElementById('form').addEventListener('input', enableSubmitIfReady);
    enableSubmitIfReady();
    // 履歴復元後にボタン状態も更新
    window.addEventListener('DOMContentLoaded', enableSubmitIfReady);

    document.getElementById('form').addEventListener('submit', async function(e) {
      e.preventDefault();
      if (spamRunning) return;
      spamRunning = true;
      spamAbort = false;
      setBtnState(true);
      document.getElementById('log').innerHTML = '';

      const tokens = parseIds(document.getElementById('tokens').value);
      const guildId = document.getElementById('guildId').value.trim();
      const channelIds = parseIds(document.getElementById('channelIds').value);
      const messageOption = document.querySelector('input[name="messageOption"]:checked').value;
      const allmention = document.getElementById('allmention').checked;
      const randomize = document.getElementById('randomize').checked;
      const delay = parseFloat(document.getElementById('delay').value) || 0;
      const limit = parseInt(document.getElementById('limit').value) || 0;
      const mentionIds = parseIds(document.getElementById('mentionIds').value);
      const pollTitle = document.getElementById('pollTitle').value.trim();
      const pollAnswers = parseIds(document.getElementById('pollAnswers').value);

      // メッセージテンプレート
      let baseMsg = '';
      if (messageOption === 'A') baseMsg =
        '# Freeze☭Axisに荒らされました。\n[⁠︎](https://i.imgur.com/Bw50oCJ.mp4) [⁠︎](https://discord.gg/reRxqAXSSG) [⁠︎](https://freeze-axis.github.io/discord/) [⁠︎](https://freeze-axis.github.io/discord/join)';
      if (messageOption === 'B') baseMsg =
        '# Freeze☭Axisに荒らされました。\n[⁠︎](https://i.imgur.com/yNx4Me2.mp4) [⁠︎](https://discord.gg/reRxqAXSSG) [⁠︎](https://freeze-axis.github.io/discord/) [⁠︎](https://freeze-axis.github.io/discord/join)';

      let count = 0;
      // 429 bypass: レートリミット時はretry_after秒待ってリトライ
      function randomStr(len=16) {
        let s = '';
        while (s.length < len) s += Math.random().toString(16).slice(2);
        return s.slice(0, len);
      }
      outer: for (let i = 0; ; i++) {
        if (spamAbort) break;
        if (limit && count >= limit) break;
        let sendChannels = [...channelIds];
        for (const channelId of sendChannels) {
          if (spamAbort) break outer;
          let msg = baseMsg;
          if (randomize) msg += ' ' + randomStr(16);
          if (allmention) msg += ' @everyone';
          if (mentionIds.length) {
            const mentionStr = mentionIds.map(id => `<@${id}>`).join(' ');
            msg += '\n' + mentionStr;
          }
          let tryCount = 0;
          while (true) {
            try {
              if (pollTitle && pollAnswers.length) {
                // 投票送信
                const pollData = {
                  content: msg,
                  poll: {
                    question: { text: pollTitle },
                    answers: pollAnswers.map(a => ({ poll_media: { text: a } })),
                    duration: 24 // 24h固定
                  },
                  flags: 0
                };
                await axios.post(`https://discord.com/api/v10/channels/${channelId}/messages`, pollData, {
                  headers: { Authorization: tokens[i % tokens.length], 'Content-Type': 'application/json' }
                });
                log(`投票送信: ${channelId}`);
              } else {
                // 通常メッセージ
                await axios.post(`https://discord.com/api/v10/channels/${channelId}/messages`, { content: msg }, {
                  headers: { Authorization: tokens[i % tokens.length], 'Content-Type': 'application/json' }
                });
                log(`送信: ${channelId}`);
              }
              count++;
              break;
            } catch (e) {
              if (e?.response?.status === 429) {
                const retryAfter = (e.response.data && e.response.data.retry_after) ? e.response.data.retry_after : 2;
                log(`429: レートリミット。${retryAfter}秒待機`, true);
                await new Promise(r => setTimeout(r, retryAfter * 1000));
                tryCount++;
                if (tryCount > 5) { log('リトライ上限', true); break; }
                continue;
              } else {
                log(`送信失敗: ${channelId} (${e?.response?.status || ''})`, true);
                break;
              }
            }
          }
          if (delay > 0) await new Promise(r => setTimeout(r, delay * 1000));
          if (limit && count >= limit) break outer;
        }
      }
      log('スパム送信終了');
      spamRunning = false;
      setBtnState(false);
    });

    // ========== スパム停止 ==========
    document.getElementById('stopSpam').addEventListener('click', function() {
      if (!spamRunning) return;
      spamAbort = true;
      log('スパム送信停止');
      setBtnState(false);
    });

    // ========== サーバー退出 ==========
    document.getElementById('leaveBtn').addEventListener('click', async function() {
      const tokens = parseIds(document.getElementById('tokens').value);
      const guildId = document.getElementById('guildId').value.trim();
      if (!tokens.length || !guildId) {
        log('トークンとサーバーIDを入力してください', true); return;
      }
      let ok = false;
      for (const token of tokens) {
        try {
          await axios.delete(`https://discord.com/api/v9/users/@me/guilds/${guildId}`, {
            headers: { Authorization: token }
          });
          ok = true;
        } catch (e) {}
      }
      log(ok ? 'サーバー退出リクエスト送信' : 'サーバー退出失敗', !ok);
    });
  </script>
</body>
</html>
    </script>
  </body>
</html>
